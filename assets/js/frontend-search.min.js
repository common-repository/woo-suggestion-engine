function viwse_ajax(e){"use strict";const s=new AbortController;return window.fetch(e.url,{method:e.type,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},body:e.data,signal:s.signal}).then((e=>e.ok?e.json():e.text().then((s=>{throw{statusText:e.statusText,responseText:s}})))).then(e.success).catch((s=>e.error&&e.error(s))).finally((()=>e.complete&&e.complete())),s}jQuery(document).ready((function(e){"use strict";if("undefined"==typeof viwse_param)return!1;viwse_param.autocomplete={containerClass:"viwse-search-results-wrap",maxHeight:500,zIndex:99999999,serviceUrl:viwse_param.search_url,minChars:viwse_param.min_chars,paramName:"s",type:"post",dataType:"JSON",triggerSelectOnValidInput:!1,currentRequest:viwse_param.pre_searched||null,onSelect:function(s){void 0!==s.is_product&&s.id&&void 0!==viwse_param.search_key&&viwse_param.search_key&&e.ajax({url:viwse_param.search_history,type:"POST",dataType:"JSON",data:{product_id:s.id,key:viwse_param.search_key}}),void 0!==s.url&&(location.href=s.url)},onSearchStart:function(){viwse_param.loading_icon&&e(this).parent().addClass("viwse-input-searching-wrap")},onSearchComplete:function(){viwse_param.search_key=e(this).val(),e(".viwse-input-searching-wrap").removeClass("viwse-input-searching-wrap")},formatResult:function(s,i){let a="",t=["viwse-search-result"];if(s.type&&e.each(s.type,(function(e,s){t.push("viwse-search-result-"+s)})),t=t.join(" "),s.message)a+=`<div class="${t}">${s.message}</div>`;else if(s.is_product){let r="("+e.Autocomplete.utils.escapeRegExChars(i)+")";a+=`<div class="${t}">`,viwse_param.suggestion_info&&viwse_param.suggestion_info.includes("image")&&(a+=`<div class="viwse-result-img"><img src="${s.img_src||viwse_param.placeholder_img_src}" loading="lazy"></div>`),a+='<div class="viwse-result-info-wrap">',a+=`<div class="viwse-result-info"><div class="viwse-result-title viwse-product-name">${s.name.replace(new RegExp(r,"gi"),"<strong>$1</strong>")}</div>`,viwse_param.suggestion_info.includes("price")&&(a+=`<div class="viwse-product-price">${s.price}</div>`),a+="</div>",viwse_param.suggestion_info.includes("sku")&&(a+=`<div class="viwse-result-info"><div class="viwse-product-sku">${s.sku}</div></div>`),a+="</div></div>"}else if(s.is_taxonomy){let r="("+e.Autocomplete.utils.escapeRegExChars(i)+")";a+=`<div class="${t}">`,a+='<div class="viwse-result-info-wrap">',a+=`<div class="viwse-result-info"><div class="viwse-result-title viwse-tax-name">${s.name.replace(new RegExp(r,"gi"),"<strong>$1</strong>")}</div>`,a+="</div>",a+="</div></div>"}return a}},e(document).on("focus",'input[name="s"]',(function(){if(e(this).hasClass("viwse-input-search"))return!1;let s=e(this).closest('form[role="search"]');return!!s.length&&("product"===s.find('[name="post_type"]').val()&&void e(this).addClass("viwse-input-search").viwseAutocomplete(viwse_param.autocomplete))}))}));